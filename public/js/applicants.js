(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{222:function(t,e,a){"use strict";a.r(e);var i,s=a(45),o=a(60),n=a(49),r=a(198);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={components:{DataTable:o.a,BreadCrumb:n.a,Button:s.a,InputArray:r.a},data:function(){return{applicants:{},applicant:{},information:{email_destination_job:[],email_destination_job_formatted:[""]},editEmailBlock:!1,requestServer:!1,errors:{}}},methods:(i={restorePage:function(){this.applicant=this.applicants={},this.requestServer=!1,this.getApplicants(1,5),this.$refs["modal-show"].hide(),this.$refs["modal-delete"].hide(),this.errors={}},restoreEl:function(){this.applicant={},this.$refs["modal-show"].hide(),this.$refs["modal-delete"].hide(),this.errors={}},deleteApplicant:function(t){this.getApplicant(t),this.$refs["modal-delete"].show()},showApplicant:function(t){this.$refs["modal-show"].show(),this.getApplicant(t)},getApplicant:function(t){var e=this;axios.get("json/applicants/"+t).then((function(t){e.applicant=t.data})).catch((function(t){}))},getApplicants:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s="json/applicants?page="+t+"&desde="+e;i&&(s=s+"&buscar="+i),axios.get(s).then((function(t){a.applicants=t.data})).catch((function(t){}))},deleteApplicantConfirm:function(){var t=this;this.requestServer=!0,axios.delete("applicants/"+this.applicant.id).then((function(e){t.restorePage(),Swal.fire({title:e.data.title,text:e.data.message,type:"success",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})})).catch((function(e){t.restoreEl(),Swal.fire({title:e.response.data.title,text:e.response.data.message,type:"error",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})}))},restoreEmail:function(){this.information={email_destination_job:[],email_destination_job_formatted:[""]},this.editEmailBlock=!1,this.getContactEmailDestination()},getContactEmailDestination:function(){var t=this;axios.get("applicants/json/contact-email-destination").then((function(e){e.data.id&&(t.information=e.data)})).catch((function(t){}))},editEmailDestination:function(){this.editEmailBlock=!0}},l(i,"restoreEmail",(function(){this.requestServer=this.editEmailBlock=!1,this.errors={},this.information={email_destination_job:[],email_destination_job_formatted:[""]},this.getContactEmailDestination()})),l(i,"updateEmail",(function(){var t=this;this.requestServer=!0,axios.put("applicants",this.information).then((function(e){t.requestServer=!1,t.restoreEmail(),Swal.fire({title:e.data.title,text:e.data.message,type:"success",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})})).catch((function(e){t.requestServer=!1,422!==e.response.status?(t.restorePage(),Swal.fire({title:e.response.data.title,text:e.response.data.message,type:"error",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})):t.errors=e.response.data.errors||{}}))})),i),created:function(){this.getApplicants(1,5),this.getContactEmailDestination()}},d=a(43),p=Object(d.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header pb-6"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"header-body"},[a("div",{staticClass:"row align-items-center py-4"},[a("div",{staticClass:"col-12"},[a("BreadCrumb",{attrs:{title:"Postulantes",active:"Postulantes"}})],1)])])])]),t._v(" "),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-8"},[a("DataTable",{attrs:{placeholder:"Nombre Completo, Puesto",object:t.applicants,buttonRead:!0,buttonUpdate:!1,buttonDelete:!0},on:{"update:object":function(e){t.applicants=e},delete:t.deleteApplicant,read:t.showApplicant,get:t.getApplicants}})],1),t._v(" "),a("div",{staticClass:"col-12 col-lg-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card shadow"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateEmail(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"font-weight-bold"},[t._v("Correos")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.editEmailBlock,expression:"editEmailBlock"}]},[a("InputArray",{attrs:{arreglo:t.information.email_destination_job,"arreglo-editar":t.information.email_destination_job_formatted},on:{"update:arreglo":function(e){return t.$set(t.information,"email_destination_job",e)}}}),t._v(" "),t.errors&&Object.keys(t.errors).length?a("label",{staticClass:"mt-2 mb-0 text-danger text-sm",attrs:{for:"id_email_destination_job"}},[t._v("\n                            Los campos correo(s) electrónico(s) destino deben ser una dirección de correo válida.\n                          ")]):t._e()],1),t._v(" "),t.editEmailBlock?t._e():a("div",[t.information.email_destination_job&&t.information.email_destination_job.length>0?a("div",t._l(t.information.email_destination_job_formatted,(function(e,i){return a("p",{key:i,staticClass:"d-block mb-1"},[t._v(t._s(e))])})),0):a("p",[t._v("No registrado")])])])])]),t._v(" "),a("div",{staticClass:"text-right"},[t.editEmailBlock?t._e():a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editEmailDestination(e)}}},[t._v("Editar")]),t._v(" "),t.editEmailBlock?a("Button",{attrs:{text:"Actualizar",classes:["btn-primary","mr-2"],"request-server":t.requestServer,"º":""}}):t._e(),t._v(" "),t.editEmailBlock?a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.restoreEmail(e)}}},[t._v("Cancelar")]):t._e()],1)])])])])])])])]),t._v(" "),a("b-modal",{ref:"modal-show",attrs:{centered:"",size:"lg"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){e.ok,e.cancel;return[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.restoreEl}},[t._v("Cerrar")])]}}])},[a("template",{slot:"modal-title"},[a("h2",{staticClass:"mb-0 mb-0 text-uppercase text-primary"},[t._v("Detalle Postulante")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("Nombre Completo")]),t._v(" "),t.applicant.full_name?a("p",[t._v(t._s(t.applicant.full_name))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("Teléfono")]),t._v(" "),t.applicant.phone?a("p",[t._v(t._s(t.applicant.phone))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("Correo Electrónico")]),t._v(" "),t.applicant.email?a("p",[t._v(t._s(t.applicant.email))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("Puesto")]),t._v(" "),t.applicant.job?a("p",[t._v(t._s(t.applicant.job))]):a("p",[t._v("No registrado")])])]),t._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("PDF")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.applicant.pdf_formatted)}})])]),t._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label d-block"},[t._v("Registrado el")]),t._v(" "),t.applicant.created_at?a("p",[t._v(t._s(t.applicant.created_at))]):t._e()])])])],2),t._v(" "),a("b-modal",{ref:"modal-delete",attrs:{centered:""},scopedSlots:t._u([{key:"modal-footer",fn:function(e){e.ok,e.cancel;return[a("Button",{attrs:{classes:["btn-danger"],text:"Eliminar","request-server":t.requestServer},on:{click:t.deleteApplicantConfirm}}),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.restoreEl}},[t._v("Cancelar")])]}}])},[a("template",{slot:"modal-title"},[a("h2",{staticClass:"mb-0 mb-0 text-uppercase text-primary"},[t._v("Eliminar Postulante")])]),t._v(" "),a("p",{staticClass:"mb-0"},[t._v("Esta seguro que desea eliminar el postulante?")])],2)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header border-0"},[e("h2",{staticClass:"mb-0 text-uppercase text-primary"},[this._v("Correos Destino")])])}],!1,null,null,null);e.default=p.exports}}]);