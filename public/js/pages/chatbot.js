(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"1jZt":function(t,e,a){var r=a("uNoH");"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,o);r.locals&&(t.exports=r.locals)},AjX3:function(t,e,a){"use strict";a("Ue4L")},CkAj:function(t,e,a){"use strict";var r=a("0YuL"),o=a("TVlQ"),s={props:{open:Boolean,loadingGet:Boolean,element:String,loadingSubmit:Boolean},components:{Button:o.a,Skeleton:r.a},data:function(){return{requestSubmit:!1,requestGet:!1,inputDestroy:"",buttonDestroy:!0}},methods:{submit:function(){this.$emit("submit")},cancelCustom:function(){this.$emit("cancel")},restore:function(){this.requestSubmit=!1,this.requestGet=!1,this.inputDestroy="",this.buttonDestroy=!0}},watch:{open:function(t){0==t&&this.restore()},inputDestroy:function(t){t===t.toUpperCase()&&"ELIMINAR"===t?this.buttonDestroy=!1:this.buttonDestroy=!0}}},n=a("KHd+"),i=Object(n.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",centered:"","footer-class":"border-0 pt-0","body-class":"pt-0"},on:{close:t.cancelCustom},scopedSlots:t._u([{key:"modal-footer",fn:function(e){e.ok;return[a("Button",{directives:[{name:"show",rawName:"v-show",value:!t.loadingGet,expression:"!loadingGet"}],attrs:{classes:["btn-danger"],text:"Eliminar","request-server":t.loadingSubmit,disabled:t.buttonDestroy},on:{click:t.submit}}),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.cancelCustom}},[t._v("Cancelar")])]}}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("template",{slot:"modal-title"},[a("div",{staticClass:"text-primary h2"},[t._v("Eliminar "+t._s(t.element.charAt(0).toUpperCase()+t.element.slice(1)))])]),t._v(" "),a("template",{slot:"modal-header-close"},[a("button",{staticClass:"btn p-0 bg-transparent",attrs:{type:"button"},on:{click:t.cancelCustom}},[a("jam-close")],1)]),t._v(" "),t.loadingGet?a("div",[a("Skeleton"),t._v(" "),a("div",{staticClass:"w-25 mb-1"},[a("Skeleton")],1),t._v(" "),a("div",{staticClass:"w-75"},[a("Skeleton")],1)],1):a("div",[a("p",[t._v("Esta apunto de eliminar un "+t._s(t.element)+", una vez que realice esta acción no se puede deshacer")]),t._v(" "),a("p",{staticClass:"mb-2"},[t._v("\n      Escribe\n      "),a("b",[t._v("ELIMINAR")]),t._v(" para confirmar\n    ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputDestroy,expression:"inputDestroy"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.inputDestroy},on:{input:function(e){e.target.composing||(t.inputDestroy=e.target.value)}}})])],2)}),[],!1,null,null,null);e.a=i.exports},J3pF:function(t,e,a){"use strict";a("1jZt")},NUuF:function(t,e,a){"use strict";var r=a("6nZA"),o={props:{activeParent:Object,removeParent:String},components:{DatePicker:a.n(r).a},data:function(){return{range:null,filters:[{text:"Cualquier Fecha",value:"all"},{text:"Hoy",value:"today"},{text:"Últimos 7 días",value:"7"},{text:"Últimos 30 días",value:"30"},{text:"Últimos 90 días",value:"90"},{text:"Este Año",value:"this_year"}],active:{text:"Cualquier Fecha",value:"all"}}},methods:{handleFilterRange:function(){var t=this;if(!this.range[0])return this.removeParent?this.active={text:"Hoy",value:"today"}:this.active={text:"Cualquier Fecha",value:"all"},this.handleFilter(this.active),!1;setTimeout((function(){t.active={text:t.$refs.datepicker.text,value:"range"}}),50),this.$refs.dropdown.hide(!0)},handleFilter:function(t){this.range=[],this.active=t,this.$refs.dropdown.hide(!0)}},watch:{activeParent:{immediate:!0,handler:function(t){t&&(this.active=t)}},removeParent:{immediate:!0,handler:function(t){t&&(this.filters=this.filters.filter((function(e){return e.value!=t})))}},active:function(t,e){this.$emit("update:active",t),this.$emit("get")},range:function(t,e){this.$emit("update:range",t)}}},s=a("KHd+"),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("b-dropdown",{ref:"dropdown",attrs:{left:"",id:"dropdown-text","menu-class":["border","shadow-none"],variant:"all"==t.active.value?"inverse-light":"inverse-primary","toggle-class":[]},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("jam-calendar",{staticClass:"current-color",staticStyle:{"margin-top":"-4px"},attrs:{height:"18px",width:"18px"}}),t._v(" "),a("span",{},[t._v(t._s(t.active.text))])]},proxy:!0}])},[t._v(" "),a("b-dropdown-text",{staticClass:"px-2",staticStyle:{width:"16rem"},attrs:{tag:"div"}},[t._l(t.filters,(function(e){return a("button",{key:e.value,staticClass:"btn mb-1 btn-sm btn-block",class:t.active.value==e.value?"btn-primary":"btn-inverse-primary",on:{click:function(a){return a.preventDefault(),t.handleFilter(e)}}},[t._v(t._s(e.text))])})),t._v(" "),a("date-picker",{ref:"datepicker",attrs:{placeholder:"Personalizado",shortcuts:[],lang:"es","input-class":"form-control mt-1",format:"D MMM YYYY","range-separator":"-",width:"100%",range:""},on:{change:t.handleFilterRange},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}},[a("jam-calendar",{staticClass:"current-color mt-2",attrs:{slot:"calendar-icon",height:"18",width:"18"},slot:"calendar-icon"})],1)],2)],1)],1)}),[],!1,null,null,null);e.a=n.exports},QiyU:function(t,e,a){"use strict";a.r(e);var r=a("0YuL"),o=a("F05R"),s=a("ZMUr"),n=a("TVlQ"),i=a("NUuF"),l=a("CkAj"),c=a("6nZA"),d=a.n(c);function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={components:{DataTable:s.a,Button:n.a,BreadCrumb:o.a,Skeleton:r.a,DatePicker:d.a,FilterDateRange:i.a,Destroy:l.a},props:{routeLeadsGetAll:String,routeQualificationGetAll:String,route:String},data:function(){return{modalDestroy:!1,loadingLead:!1,requestLead:!1,request_todo:!1,request_filter:!1,errors_form:{},modalExport:!1,element_form:{},leads:{},lead:{},loadingLeadsGet:!1,loadingQualification:!1,title:"",elementsPerPage:10,filterDate:{active:{},range:null},qualification:[]}},methods:{restoreLeads:function(){this.lead={},this.modalDestroy=!1,this.getLeads(1,this.elementsPerPage)},destroyLeadConfirm:function(){var t=this;this.requestLead=!0,axios.delete("/chatbot/leads/"+this.lead.id).then((function(e){t.requestLead=!1,t.restoreLeads(),Swal.fire({title:e.data.title,text:e.data.message,type:"success",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-inverse-primary"}})})).catch((function(e){Swal.fire({title:e.response.data.title,text:e.response.data.message,type:"error",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-inverse-primary"}}),t.restoreEl()}))},openModalExport:function(){this.modalExport=!0},restoreEl:function(){this.lead={},this.modalDestroy=!1,this.modalExport=!1},allExportFunction:function(){var t=this;this.request_todo=!0,axios.get("/chatbot/leads/all-export",{headers:{"Content-Disposition":"attachment; filename=template.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","Líder Leads Chatbot.xlsx"),document.body.appendChild(r),r.click(),r.remove(),t.request_todo=!1,t.restoreEl()})).catch((function(e){t.request_todo=!1,422!==e.response.status||(t.errors_form=e.response.data.errors||{})}))},filterExportFunction:function(){var t=this;this.request_filter=!0;var e=new FormData;this.element_form.from&&e.append("from",this.element_form.from),this.element_form.to&&e.append("to",this.element_form.to),axios.post("/chatbot/leads/filter-export",e,{headers:{"Content-Disposition":"attachment; filename=template.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","Líder Leads Chatbot.xlsx"),document.body.appendChild(r),r.click(),r.remove(),t.request_filter=!1,t.restoreEl()})).catch((function(e){if(t.request_filter=!1,422===e.response.status)return t.errors_form={from:[],to:[]},""!=t.element_form.from&&null!=t.element_form.from||(t.errors_form.from=["El campo desde es requerido"]),""!=t.element_form.to&&null!=t.element_form.to||(t.errors_form.to=["El campo hasta es requerido"]),void console.log(t.errors_form)}))},getLeads:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.routeLeadsGetAll+"?page="+t+"&itemsPerPage="+e;r&&(o=o+"&q="+r),axios.get(o).then((function(t){a.leads=t.data})).catch((function(t){}))},getQualification:function(){var t=this;this.loadingQualification=!0;var e=this.routeQualificationGetAll;axios.get(e,{params:m({date:this.filterDate.active.value},this.filterDate.range?{range:this.filterDate.range}:{})}).then((function(e){t.qualification=e.data,t.loadingQualification=!1})).catch((function(t){}))},deleteLead:function(t){this.modalDestroy=!0,this.getLead(t)},getLead:function(t){var e=this;this.loadingGet=!0,axios.get(this.route+"/leads/json/get/"+t).then((function(t){e.lead=t.data,e.loadingGet=!1})).catch((function(t){}))}},created:function(){this.getLeads(1,this.elementsPerPage),this.getQualification()}},v=(a("AjX3"),a("KHd+")),h=Object(v.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header pb-6"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"header-body"},[a("div",{staticClass:"row align-items-center pt-0 pt-md-2 pb-4"},[a("div",{staticClass:"col-6 col-md-7"},[a("BreadCrumb",{attrs:{title:"Chatbot",active:"Chatbot"}})],1)])])])]),t._v(" "),a("div",{staticClass:"container-fluid mt--6"},[a("b-tabs",{attrs:{pills:"",vertical:"","nav-wrapper-class":"col-12 col-lg-3 col-xl-2 mb-4 mb-lg-0","nav-class":"border bg-white py-2","content-class":"col-12 col-lg-9 col-xl-10"}},[a("b-tab",{attrs:{title:"Leads",active:"","title-link-class":"border-0 shadow-none bg-white py-3","title-item-class":"pr-0 my-0"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-4 text-right"},[a("button",{staticClass:"btn btn-icon btn-inverse-primary",style:0==t.leads.total?"opacity: 0.50":"",attrs:{type:"button",disabled:0==t.leads.total},on:{click:t.openModalExport}},[a("span",{staticClass:"btn-inner--icon"},[a("jam-download",{staticClass:"current-color"})],1),t._v(" "),a("span",{staticClass:"btn-inner--text"},[t._v("Exportar "+t._s(0==t.leads.total?"(0 Leads)":""))])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("DataTable",{attrs:{object:t.leads,placeholder:"Nombre, Email, Móvil, Proyecto, Host","button-update":!1,"button-read":!1,"button-delete":!0,"entries-prop":t.elementsPerPage},on:{get:t.getLeads,delete:t.deleteLead,"update:entriesProp":function(e){t.elementsPerPage=e},"update:entries-prop":function(e){t.elementsPerPage=e}}})],1)])]),t._v(" "),a("b-tab",{attrs:{title:"Calificaciones","title-link-class":"border-0 shadow-none bg-white py-3","title-item-class":"pr-0 my-0"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header border-0 pb-0"},[a("h2",{staticClass:"mb-0 text-uppercase text-primary"},[t._v("\n                  Calificaciones\n                ")])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("FilterDateRange",{attrs:{active:t.filterDate.active,range:t.filterDate.range},on:{"update:active":function(e){return t.$set(t.filterDate,"active",e)},"update:range":function(e){return t.$set(t.filterDate,"range",e)},get:function(e){return t.getQualification()}}}),t._v(" "),a("div",{staticClass:"mt-4"},[t.loadingQualification?a("div",{staticStyle:{width:"300px",display:"inline-block"}},[a("skeleton",{attrs:{height:"320px"}})],1):a("table",{staticClass:"table table-bordered",staticStyle:{width:"300px"}},t._l(t.qualification,(function(e){return a("tr",{key:e.name},[a("td",{staticStyle:{background:"#fdfbfa"}},[a("strong",[t._v(t._s(e.name))])]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n                                          "+t._s(e.count)+"\n                                      ")])])})),0)])],1)])])])])])])],1)],1),t._v(" "),a("destroy",{attrs:{element:"lead",open:t.modalDestroy,"loading-get":t.loadingLead,"loading-submit":t.requestLead},on:{cancel:t.restoreLeads,submit:t.destroyLeadConfirm}}),t._v(" "),a("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",centered:"",size:"md","footer-class":"border-0 pt-0","body-class":"pt-0"},on:{close:t.restoreEl},scopedSlots:t._u([{key:"modal-footer",fn:function(e){e.ok;return[a("button",{staticClass:"btn btn-inverse-primary",attrs:{type:"button",disabled:t.request_todo},on:{click:t.allExportFunction}},[t.request_todo?a("span",[t._v("\n          Cargando\n          "),a("svg",{staticClass:"ml-1 loading-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 40 40"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[a("g",{attrs:{transform:"translate(1 1)","stroke-width":"3"}},[a("circle",{attrs:{"stroke-opacity":"1",cx:"0",cy:"0",r:"0"}}),t._v(" "),a("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",transform:"rotate(83.9974 18 18)"}},[a("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]):a("span",[t._v("Todo")])]),t._v(" "),a("button",{staticClass:"btn btn-inverse-info",attrs:{type:"button",disabled:t.request_filter},on:{click:t.filterExportFunction}},[t.request_filter?a("span",[t._v("\n          Cargando\n          "),a("svg",{staticClass:"ml-1 loading-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 40 40"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[a("g",{attrs:{transform:"translate(1 1)","stroke-width":"3"}},[a("circle",{attrs:{"stroke-opacity":"1",cx:"0",cy:"0",r:"0"}}),t._v(" "),a("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",transform:"rotate(83.9974 18 18)"}},[a("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]):a("span",[t._v("Con Filtros")])]),t._v(" "),a("button",{staticClass:"btn btn-inverse-light",attrs:{type:"button"},on:{click:t.restoreEl}},[t._v("\n        Cerrar\n      ")])]}}]),model:{value:t.modalExport,callback:function(e){t.modalExport=e},expression:"modalExport"}},[a("template",{slot:"modal-title"},[a("div",{staticClass:"text-primary h2"},[t._v("Exportar Leads")])]),t._v(" "),a("template",{slot:"modal-header-close"},[a("button",{staticClass:"btn p-0 bg-transparent",attrs:{type:"button"},on:{click:t.restoreEl}},[a("jam-close")],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"font-weight-bold",attrs:{for:"from"}},[t._v("Desde")]),t._v(" "),a("date-picker",{attrs:{"input-attr":{id:"from"},"value-type":"format",format:"HH:mm DD-MM-YYYY",type:"datetime","time-picker-options":{start:"06:00",step:"00:05",end:"24:00"},"first-day-of-week":1,lang:"es","input-class":"form-control",width:"100%"},model:{value:t.element_form.from,callback:function(e){t.$set(t.element_form,"from",e)},expression:"element_form.from"}},[a("jam-calendar")],1),t._v(" "),t.errors_form&&t.errors_form.from?a("label",{staticClass:"mt-2 text-danger text-sm",attrs:{for:"from"}},[t._v(t._s(t.errors_form.from[0]))]):t._e()],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"font-weight-bold",attrs:{for:"to"}},[t._v("Hasta")]),t._v(" "),a("date-picker",{attrs:{"input-attr":{id:"to"},"value-type":"format",format:"HH:mm DD-MM-YYYY",type:"datetime","time-picker-options":{start:"06:00",step:"00:05",end:"24:00"},"first-day-of-week":1,lang:"es","input-class":"form-control",width:"100%"},model:{value:t.element_form.to,callback:function(e){t.$set(t.element_form,"to",e)},expression:"element_form.to"}},[a("jam-calendar")],1),t._v(" "),t.errors_form&&t.errors_form.to?a("label",{staticClass:"mt-2 text-danger text-sm",attrs:{for:"to"}},[t._v(t._s(t.errors_form.to[0]))]):t._e()],1)])])],2)],1)}),[],!1,null,null,null);e.default=h.exports},TVlQ:function(t,e,a){"use strict";var r={props:{text:String,classes:Array,requestServer:Boolean},methods:{click:function(){this.$emit("click")}}},o=(a("J3pF"),a("KHd+")),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn",class:t.classes,attrs:{disabled:1==t.requestServer},on:{click:t.click}},[t.requestServer?a("span",[t._v("\n        Cargando \n        "),a("svg",{staticClass:"ml-1 loading-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 40 40"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[a("g",{attrs:{transform:"translate(1 1)","stroke-width":"3"}},[a("circle",{attrs:{"stroke-opacity":"1",cx:"0",cy:"0",r:"0"}}),t._v(" "),a("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",transform:"rotate(83.9974 18 18)"}},[a("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]):a("span",[t._v(t._s(t.text))])])}),[],!1,null,"7a0ec1bd",null);e.a=s.exports},Ue4L:function(t,e,a){var r=a("twSO");"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,o);r.locals&&(t.exports=r.locals)},twSO:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.nav-pills .nav-link.active {\r\n  border-left: 4px solid #1762e6 !important;\r\n  background-color: #fdfbfa !important;\n}\r\n",""])},uNoH:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.loading-svg[data-v-7a0ec1bd]{\r\n    fill: currentColor;\r\n    stroke: currentColor;\n}\r\n",""])}}]);