(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{226:function(t,a,e){"use strict";e.r(a);var s=e(45),r=e(54),o=e.n(r);function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var n={props:{routeLogin:{type:String,required:!0},routeLogout:{type:String,required:!0}},components:{Button:s.a,vueDropzone:o.a},data:function(){var t;return i(t={errors:{},startBlock:!0,editEmail:!1,editPassword:!1,usuario:{rel_role:{name:""},full_name:"",username:"",email:"",contrasena_actual:"",contrasena_nueva:"",contrasena_nueva_confirmation:""},dropzoneOptions:{url:"/",maxFiles:1,acceptedFiles:"image/png,image/jpeg,image/jpg,image/svg+xml",autoProcessQueue:!1,thumbnailWidth:100,addRemoveLinks:!0,dictRemoveFile:"Remover"}},"startBlock",!0),i(t,"passwordBlock",!1),i(t,"requestServer",!1),t},methods:{getUser:function(){var t=this;axios.get("json/profile").then((function(a){t.usuario=a.data})).catch((function(t){}))},restorePage:function(){this.errors={},this.startBlock=!0,this.editPassword=this.editEmail=this.passwordBlock=this.requestServer=!1,this.usuario={rel_role:{name:""},full_name:"",username:"",email:"",contrasena_actual:"",contrasena_nueva:"",contrasena_nueva_confirmation:""},this.getUser()},toggleEmail:function(){this.editEmail=!0},updateProfile:function(){var t=this;if(this.requestServer=!0,this.editEmail){var a=new FormData;a.append("id",this.usuario.id),this.usuario.username?a.append("username",this.usuario.username):a.append("username",""),this.usuario.email?a.append("email",this.usuario.email):a.append("email",""),this.usuario.full_name?a.append("full_name",this.usuario.full_name):a.append("full_name",""),this.$refs.ref_image.dropzone.files[0]&&a.append("avatar",this.$refs.ref_image.dropzone.files[0]),this.usuario.eliminar_imagen&&a.append("eliminar_imagen",this.usuario.eliminar_imagen),a.append("_method","put"),axios.post("profile",a).then((function(a){t.requestServer=!1,t.restorePage(),Swal.fire({title:a.data.title,text:a.data.message,type:"success",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})})).catch((function(a){t.requestServer=!1,422!==a.response.status?(t.restorePage(),Swal.fire({title:a.response.data.title,text:a.response.data.message,type:"error",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})):t.errors=a.response.data.errors||{}}))}this.editPassword&&axios.put("change-password",this.usuario).then((function(a){t.requestServer=!1,t.restorePage(),Swal.fire({title:a.data.title,text:a.data.message,type:"success",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}}),setTimeout((function(){return axios.post(t.routeLogout).then((function(a){document.location.href=t.routeLogin})).catch((function(t){}))}),5e3)})).catch((function(a){t.requestServer=!1,422!==a.response.status?(t.restorePage(),Swal.fire({title:a.response.data.title,text:a.response.data.message,type:"error",confirmButtonText:"OK",buttonsStyling:!1,customClass:{confirmButton:"btn btn-primary"}})):t.errors=a.response.data.errors||{}}))},cambiarContrasena:function(){this.startBlock=!1,this.passwordBlock=!0,this.editPassword=!0}},created:function(){this.getUser()}},l=e(43),u=Object(l.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"container-fluid mt-0 mt-md-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"card shadow mb-4"},[t._m(0),t._v(" "),e("form",{on:{submit:function(a){return a.preventDefault(),t.updateProfile(a)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.startBlock,expression:"startBlock"}],staticClass:"card-body"},[t.editEmail||t.editPassword?t._e():e("div",{staticClass:"rounded-circle text-center mb-2"},[t.usuario.avatar?e("img",{staticClass:"shadow rounded-circle shadow object-fit--cover",attrs:{height:"120",width:"120",src:"/files/img/users/"+t.usuario.avatar,alt:"Perfil"}}):e("img",{staticClass:"shadow rounded-circle shadow object-fit--cover",attrs:{height:"120",width:"120",src:"/files/img/users/avatar.jpg",alt:"Perfil"}})]),t._v(" "),t.editEmail&&!t.editPassword?e("div",{staticClass:"text-center mb-3"},[e("span",{staticClass:"font-weight-bold mb-2 d-block"},[t._v("Avatar")]),t._v(" "),t.usuario.avatar?e("a",{staticClass:"btn btn-danger btn-sm mb-3",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.usuario.avatar="",void(t.usuario.eliminar_imagen=!0)}}},[t._v("Eliminar Imagen Actual")]):t._e(),t._v(" "),t.usuario.avatar?e("img",{staticClass:"rounded-circle shadow object-fit--cover d-block mx-auto mb-3",attrs:{alt:"Colaborador",height:"120",width:"120",src:"/files/img/users/"+t.usuario.avatar}}):t._e(),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"}),t._v(" "),e("div",{staticClass:"col-12 col-lg-3"},[e("vue-dropzone",{ref:"ref_image",attrs:{id:"id_image",options:t.dropzoneOptions,duplicateCheck:!0,useCustomSlot:!0},on:{"vdropzone-file-added":function(a){return t.$validateImageDropzone(a,t.$refs.ref_image.dropzone,1,1e5,"100kb")}}},[e("div",{staticClass:"dropzone-custom-content"},[e("h5",{staticClass:"dropzone-custom-title text-primary"},[t._v("Suelte el archivo aquí o haga click para cargarlo.")])])])],1),t._v(" "),e("div",{staticClass:"col-lg"})])]):t._e(),t._v(" "),e("div",{staticClass:"mb-0"},[t.editEmail||t.editPassword?t._e():e("h2",{staticClass:"font-weight-light text-center mb-3"},[t._v(t._s(t.usuario.full_name))]),t._v(" "),t.editEmail&&!t.editPassword?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("span",{staticClass:"font-weight-bold"},[t._v("Nombre Completo:")]),t._v(" "),t.editEmail&&!t.editPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.full_name,expression:"usuario.full_name"}],staticClass:"d-inline-block form-control form-control-alternative w-100",attrs:{type:"text"},domProps:{value:t.usuario.full_name},on:{input:function(a){a.target.composing||t.$set(t.usuario,"full_name",a.target.value)}}}):t._e(),t._v(" "),t.errors&&t.errors.nombre?e("label",{staticClass:"d-block text-sm mt-2 mb-0 text-danger"},[t._v(t._s(t.errors.nombre[0]))]):t._e()])])]):t._e()]),t._v(" "),e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("span",{staticClass:"font-weight-bold"},[t._v("Usuario:")]),t._v(" "),t.editEmail||t.editPassword?t._e():e("span",{staticClass:"font-weight-light mb-4 d-block"},[t._v(t._s(t.usuario.username))]),t._v(" "),t.editEmail&&!t.editPassword?e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.username,expression:"usuario.username"}],staticClass:"mt-1 form-control-alternative d-inline-block form-control w-100",attrs:{type:"text"},domProps:{value:t.usuario.username},on:{input:function(a){a.target.composing||t.$set(t.usuario,"username",a.target.value)}}}),t._v(" "),t.errors&&t.errors.username?e("label",{staticClass:"d-block text-sm mt-2 mb-0 text-danger"},[t._v(t._s(t.errors.username[0]))]):t._e()]):t._e()]),t._v(" "),e("div",{staticClass:"col-12"},[e("span",{staticClass:"font-weight-bold"},[t._v("Correo Electrónico:")]),t._v(" "),t.editEmail||t.editPassword?t._e():e("span",{staticClass:"font-weight-light mb-4 d-block"},[t._v(t._s(t.usuario.email))]),t._v(" "),t.editEmail&&!t.editPassword?e("div",{staticClass:"form-group"},[t.editEmail&&!t.editPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.email,expression:"usuario.email"}],staticClass:"mt-1 form-control-alternative d-inline-block form-control w-100",attrs:{type:"text"},domProps:{value:t.usuario.email},on:{input:function(a){a.target.composing||t.$set(t.usuario,"email",a.target.value)}}}):t._e(),t._v(" "),t.errors&&t.errors.email?e("label",{staticClass:"d-block text-sm mt-2 mb-0 text-danger"},[t._v(t._s(t.errors.email[0]))]):t._e()]):t._e()]),t._v(" "),t.editEmail||t.editPassword?t._e():e("div",{staticClass:"col-12"},[e("span",{staticClass:"font-weight-bold"},[t._v("Rol:")]),t._v(" "),e("span",{staticClass:"font-weight-light mb-4 d-block"},[t._v(t._s(t.usuario.rel_role.name))])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passwordBlock,expression:"passwordBlock"}],staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold",attrs:{for:"id_contrasena_actual"}},[t._v("Contraseña Actual:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.contrasena_actual,expression:"usuario.contrasena_actual"}],staticClass:"form-control form-control-alternative",attrs:{type:"password",placeholder:"Contraseña Actual",id:"id_contrasena_actual"},domProps:{value:t.usuario.contrasena_actual},on:{input:function(a){a.target.composing||t.$set(t.usuario,"contrasena_actual",a.target.value)}}}),t._v(" "),t.errors&&t.errors.contrasena_actual?e("label",{staticClass:"mt-2 mb-0 d-block text-sm text-danger",attrs:{for:"id_contrasena_actual"}},[t._v(t._s(t.errors.contrasena_actual[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold",attrs:{for:"id_contrasena_nueva"}},[t._v("Contraseña Nueva:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.contrasena_nueva,expression:"usuario.contrasena_nueva"}],staticClass:"form-control form-control-alternative",attrs:{type:"password",placeholder:"Contraseña Nueva",id:"id_contrasena_nueva"},domProps:{value:t.usuario.contrasena_nueva},on:{input:function(a){a.target.composing||t.$set(t.usuario,"contrasena_nueva",a.target.value)}}}),t._v(" "),t.errors&&t.errors.contrasena_nueva?e("label",{staticClass:"mt-2 mb-0 d-block text-sm text-danger",attrs:{for:"id_contrasena_nueva"}},[t._v(t._s(t.errors.contrasena_nueva[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold",attrs:{for:"id_confirmar_contrasena"}},[t._v("Confirmar Nueva Contraseña:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.contrasena_nueva_confirmation,expression:"usuario.contrasena_nueva_confirmation"}],staticClass:"form-control form-control-alternative",attrs:{type:"password",placeholder:"Confirmar Nueva Contraseña",id:"id_confirmar_contrasena"},domProps:{value:t.usuario.contrasena_nueva_confirmation},on:{input:function(a){a.target.composing||t.$set(t.usuario,"contrasena_nueva_confirmation",a.target.value)}}}),t._v(" "),t.errors&&t.errors.contrasena_nueva_confirmation?e("label",{staticClass:"mt-2 mb-0 d-block text-sm text-danger",attrs:{for:"id_confirmar_contrasena"}},[t._v(t._s(t.errors.contrasena_nueva_confirmation[0]))]):t._e()])])])]),t._v(" "),e("div",{staticClass:"card-footer text-right border-0"},[t.editEmail||t.editPassword?t._e():e("a",{staticClass:"btn btn-info mr-2",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toggleEmail(a)}}},[t._v("Editar")]),t._v(" "),t.editPassword||t.editEmail?t._e():e("a",{staticClass:"btn btn-neutral",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.cambiarContrasena(a)}}},[t._v("Cambiar Contraseña")]),t._v(" "),t.editPassword||t.editEmail?e("Button",{attrs:{text:"Actualizar",classes:["btn-primary","mr-2"],"request-server":t.requestServer}}):t._e(),t._v(" "),t.editPassword||t.editEmail?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.restorePage(a)}}},[t._v("Cancelar")]):t._e()],1)])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-header border-0"},[a("h2",{staticClass:"h2 text-primary text-uppercase mb-0"},[this._v("Mi Perfil")])])}],!1,null,null,null);a.default=u.exports},45:function(t,a,e){"use strict";var s={props:{text:String,classes:Array,requestServer:Boolean},methods:{click:function(){this.$emit("click")}}},r=e(43),o=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn",class:t.classes,attrs:{disabled:1==t.requestServer},on:{click:t.click}},[t.requestServer?e("span",[t._v("\n        Cargando \n        "),e("svg",{staticClass:"ml-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 40 40",stroke:"#fff"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[e("circle",{attrs:{"stroke-opacity":"1",cx:"0",cy:"0",r:"0"}}),t._v(" "),e("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",transform:"rotate(83.9974 18 18)"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]):e("span",[t._v(t._s(t.text))])])}),[],!1,null,null,null);a.a=o.exports}}]);